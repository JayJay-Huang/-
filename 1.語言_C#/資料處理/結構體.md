# 結構體（Struct）
>在C#中，結構體是值類型數據結構。
>使得一個單一變量variable可以存儲各種數據類型的相關數據。
>struct關鍵字用於創建結構體。
>結構體是用來代表一個記錄。
---

定義結構體

```
struct Books 
{ 
   public string title; 
   public string author; 
   public string subject; 
   public int book_id; 
};
```
struct 語句為程序定義了一個帶有多個成員的新的數據類型。


C# 結構的特點

您已經用了一個簡單的名為Books 的結構。在C# 中的結構與傳統的C 或C++ 中的結構不同。C# 中的結構有以下特點：
- 結構可帶有方法、字段、索引、屬性、運算符方法和事件。
- 結構可定義構造函數，但不能定義析構函數。但是，您不能為結構定義無參構造函數。無參構造函數(默認)是自動定義的，且不能被改變。
- 與類不同，結構不能繼承其他的結構或類。
- 結構不能作為其他結構或類的基礎結構。
- 結構可實現一個或多個接口。
- 結構成員不能指定為abstract、virtual 或protected。
- 當您使用New操作符創建一個結構對象時，會調用適當的構造函數來創建結構。與類不同，結構可以不使用New操作符即可被實例化。
- 如果不使用New 操作符，只有在所有的字段都被初始化之後，字段才被賦值，對象才被使用。


類 vs 結構

類和結構有以下幾個基本的不同點：
- 類是引用類型，結構是值類型。
- 結構不支持繼承。
- 結構不能聲明默認的構造函數。

類與結構體的區別

1、結構體中聲明的字段無法賦予初值，類可以:
```
struct test001
{
    private int aa = 1; //無法
}
```
執行以上代碼將出現“ 結構中不能實例屬性或字段初始值設定 ”的報錯。
```
class test002
{
    private int aa = 1;
}
```
2、結構體的構造函數中，必須為結構體所有字段賦值，類的構造函數無此限制:
補充：類與結構的選擇
首先明確，類的對像是存儲在堆空間中，結構存儲在棧中。堆空間大，但訪問速度較慢，棧空間小，訪問速度相對更快。
故當我們描述一個輕量級對象的時候，結構可提高效率，成本更低。當然，這也得從需求出發，假如我們在傳值的時候希望傳遞的是對象的引用地址而不是對象的拷貝，就應該使用類了。

C# 中結構類型和類類型在語法上非常相似，他們都是一種數據結構，都可以包括數據成員和方法成員。
結構和類的區別：
- 1、結構是值類型，它在棧中分配空間；而類是引用類型，它在堆中分配空間，棧中保存的只是引用。
- 2、結構類型直接存儲成員數據，讓其他類的數據位於堆中，位於棧中的變量保存的是指向堆中數據對象的引用。
C# 中的簡單類型，如int、double、bool等都是結構類型。如果需要的話，甚至可以使用結構類型結合運算符運算重載，再為C# 語言創建出一種新的值類型來。
由於結構是值類型，並且直接存儲數據，因此在一個對象的主要成員為數據且數據量不大的情況下，使用結構會帶來更好的性能。
因為結構是值類型，因此在為結構分配內存，或者當結構超出了作用域被刪除時，性能會非常好，因為他們將內聯或者保存在堆棧中。當把一個結構類型的變量賦值給另一個結構時，對性能的影響取決於結構的大小，如果結構的數據成員非常多而且複雜，就會造成損失，接下來使用一段代碼來說明這個問題。
結構和類的適用場合分析：
- 1、當堆棧的空間很有限，且有大量的邏輯對象時，創建類要比創建結構好一些；
- 2、對於點、矩形和顏色這樣的輕量對象，假如要聲明一個含有許多個顏色對象的數組，則CLR需要為每個對象分配內存，在這種情況下，使用結構的成本較低；
- 3、在表現抽象和多級別的對象層次時，類是最好的選擇，因為結構不支持繼承。
- 4、大多數情況下，目標類型只是含有一些數據，或者以數據為主。